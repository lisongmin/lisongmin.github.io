<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>听风小筑 - 时区介绍和用法</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">

          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/mathtex-script-type.min.js" integrity="sha384-zWYbd0NBwgTsgIdFKVprSfTh1mbMPe5Hz1X3yY4Sd1h/K1cQoUe36OGwAGz/PcDy" crossorigin="anonymous"></script>
              
          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"
                  onload="renderMathInElement(document.body);"></script>
              
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;site.css">
          
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">听风小筑</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;lisongmin.github.io">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;i-read">
                            I-Read
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;lisongmin.github.io">听风小筑</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;lisongmin.github.io">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;i-read">
                                    I-Read
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    


<div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content always-active">
        <nav id="TableOfContents">
            <ul>
                
                <li>
                    <a href="https://lisongmin.github.io/timezone/#shi-qu-jie-shao" class="toc-link">时区介绍</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://lisongmin.github.io/timezone/#shi-jian-biao-shi-fang-fa" class="toc-link">时间表示方法</a>
                        </li>
                        
                        <li>
                            <a href="https://lisongmin.github.io/timezone/#shi-zhong-zhuan-huan" class="toc-link">时钟转换</a>
                        </li>
                        
                        <li>
                            <a href="https://lisongmin.github.io/timezone/#shi-yong-na-chong-shi-jian" class="toc-link">使用哪种时间</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://lisongmin.github.io/timezone/#yong-fa" class="toc-link">用法</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://lisongmin.github.io/timezone/#pythonxia-de-yong-fa" class="toc-link">python下的用法</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
            </ul>
        </nav>
    </div>
</div>


<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;timezone&#x2F;">时区介绍和用法</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2019-05-26</span>
            
        </div>
    </header>

    <div class="post-content">
      <h1 id="shi-qu-jie-shao">时区介绍</h1>
<p>时区的相关详细介绍可以参考<a rel="noopener" target="_blank" href="https://zh.wikipedia.org/wiki/%E5%8D%8F%E8%B0%83%E4%B8%96%E7%95%8C%E6%97%B6">维基百科</a>.</p>
<p>这里只做简单介绍，主要是介绍不同地区的时间是如何转换的。</p>
<p>首先介绍一些时间相关的概念，这里按照自己理解给出的表述，不是准确描述。</p>
<ul>
<li>本地时间 我们日常生活中使用的时间，是某个地区统一使用的时间，它一般会以太阳直射成影最小作为正午时间。
我们知道地球是圆的，中国的中午12点和美国的中午12点不是同一个时间，但是都是太阳在头顶的时间点。</li>
<li>世界协调时间(UTC) 是标准时间，是全球各地时间的基准。本地时间是按照UTC时间的偏移来表示。</li>
<li>时区 用于表示本地时间和UTC时间的偏移。</li>
</ul>
<h2 id="shi-jian-biao-shi-fang-fa">时间表示方法</h2>
<p>不带时区的时间可以表示为</p>
<pre style="background-color:#fafafa;">
<code><span style="color:#80cbc4;">2019-05-26T14:28:00
</span></code></pre>
<p>由于没有时区信息，它并不能表达是哪个地区的时间。这种格式的时间只能在同一个时区内传播。</p>
<p>带时区的时间可以有两种表示方法，一种是显示本地时间，并显示时间偏移，如:</p>
<pre style="background-color:#fafafa;">
<code><span style="color:#80cbc4;">2019-05-26T14:28:00+08:00 # 北京时间
2019-05-26T15:28:00+09:00 # 东京时间
</span></code></pre>
<p>另一种是显示本地时间，并加上时区的别名，如下：</p>
<pre style="background-color:#fafafa;">
<code><span style="color:#80cbc4;">2019-05-26T14:28:00 CST # 北京时间(China Standard Time)
2019-05-26T15:28:00 JST # 东京时间(Japan Standard Time)
</span></code></pre>
<p>但注意使用别名是可能存在冲突的，如美国也有一个时区是用CST表示的。所以一般用时间偏移来表示更加准确。</p>
<h2 id="shi-zhong-zhuan-huan">时钟转换</h2>
<ul>
<li>UTC时间转换成本地时间，只要加上时间偏移即可</li>
<li>本地时间转换成UTC时间，只要减去时间偏移即可</li>
<li>两个本地时间转换，只要加上两个时区的差值即可</li>
</ul>
<table><thead><tr><th>地区</th><th>时间</th></tr></thead><tbody>
<tr><td>UTC时间</td><td>2019-05-26T06:28:00+00:00</td></tr>
<tr><td>北京时间</td><td>2019-05-26T14:28:00+08:00</td></tr>
<tr><td>东京时间</td><td>2019-05-26T15:28:00+09:00</td></tr>
</tbody></table>
<h2 id="shi-yong-na-chong-shi-jian">使用哪种时间</h2>
<p>一般，带时区的时间可以自由转换为不同地区的本地时间，而不带时区的时间不能转换，所以，如果是基于全球化的应用，
一般都需要使用带时区的时间。</p>
<h1 id="yong-fa">用法</h1>
<h2 id="pythonxia-de-yong-fa">python下的用法</h2>
<p>在python中，需要注意不带时区的时间和带时区信息的时间是不能比较大小的，带时区信息的时间即使时区不一样，也可以比较大小，因为他们可以转换成UTC时间。</p>
<p>python默认使用的是不带时区的本地时间，如果要获取带时区的时间，需要一些额外操作。</p>
<ol>
<li>
<p>获取当前时间</p>
<ul>
<li>
<p>不带时区</p>
<pre style="background-color:#fafafa;">
<code class="language-python" data-lang="python"><span style="font-style:italic;color:#7c4dff;">from </span><span style="color:#80cbc4;">datetime </span><span style="font-style:italic;color:#7c4dff;">import </span><span style="color:#80cbc4;">datetime
</span><span style="color:#80cbc4;">now </span><span style="color:#39adb5;">= </span><span style="color:#6182b8;">datetime</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">now</span><span style="color:#39adb5;">()
</span></code></pre></li>
<li>
<p>带时区信息</p>
<pre style="background-color:#fafafa;">
<code class="language-python" data-lang="python"><span style="font-style:italic;color:#7c4dff;">from </span><span style="color:#80cbc4;">datetime </span><span style="font-style:italic;color:#7c4dff;">import </span><span style="color:#80cbc4;">datetime</span><span style="color:#39adb5;">, </span><span style="color:#80cbc4;">timezone
</span><span style="color:#80cbc4;">now </span><span style="color:#39adb5;">= </span><span style="color:#6182b8;">datetime</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">now</span><span style="color:#39adb5;">(</span><span style="color:#6182b8;">timezone</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">utc</span><span style="color:#39adb5;">).</span><span style="color:#6182b8;">astimezone</span><span style="color:#39adb5;">()
</span></code></pre>
<p>需要python 3.2及以后版本，如果需要支持更早的版本，需要引入pytz库</p>
</li>
</ul>
</li>
<li>
<p>将字符串转换成时间</p>
<ul>
<li>
<p>转换不带时区的字符串</p>
<pre style="background-color:#fafafa;">
<code class="language-python" data-lang="python"><span style="font-style:italic;color:#7c4dff;">from </span><span style="color:#80cbc4;">datetime </span><span style="font-style:italic;color:#7c4dff;">import </span><span style="color:#80cbc4;">datetime
</span><span style="color:#80cbc4;">date </span><span style="color:#39adb5;">= </span><span style="color:#6182b8;">datetime</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">strptime</span><span style="color:#39adb5;">(&#39;</span><span style="color:#91b859;">2019-05-26T14:28:00</span><span style="color:#39adb5;">&#39;, &#39;</span><span style="color:#80cbc4;">%Y</span><span style="color:#91b859;">-</span><span style="color:#80cbc4;">%m</span><span style="color:#91b859;">-</span><span style="color:#80cbc4;">%d</span><span style="color:#91b859;">T</span><span style="color:#80cbc4;">%H</span><span style="color:#91b859;">:</span><span style="color:#80cbc4;">%M</span><span style="color:#91b859;">:</span><span style="color:#80cbc4;">%S</span><span style="color:#39adb5;">&#39;)
</span></code></pre></li>
<li>
<p>转换带时区的字符串</p>
<pre style="background-color:#fafafa;">
<code class="language-python" data-lang="python"><span style="font-style:italic;color:#7c4dff;">from </span><span style="color:#80cbc4;">datetime </span><span style="font-style:italic;color:#7c4dff;">import </span><span style="color:#80cbc4;">datetime
</span><span style="color:#80cbc4;">date </span><span style="color:#39adb5;">= </span><span style="color:#6182b8;">datetime</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">strptime</span><span style="color:#39adb5;">(&#39;</span><span style="color:#91b859;">2019-05-26T14:28:00+0800</span><span style="color:#39adb5;">&#39;, &#39;</span><span style="color:#80cbc4;">%Y</span><span style="color:#91b859;">-</span><span style="color:#80cbc4;">%m</span><span style="color:#91b859;">-</span><span style="color:#80cbc4;">%d</span><span style="color:#91b859;">T</span><span style="color:#80cbc4;">%H</span><span style="color:#91b859;">:</span><span style="color:#80cbc4;">%M</span><span style="color:#91b859;">:</span><span style="color:#80cbc4;">%S%z</span><span style="color:#39adb5;">&#39;)
</span></code></pre></li>
</ul>
</li>
<li>
<p>将时间转换成字符串</p>
<ul>
<li>
<p>转换成不带时区的字符串</p>
<pre style="background-color:#fafafa;">
<code class="language-python" data-lang="python"><span style="font-style:italic;color:#7c4dff;">from </span><span style="color:#80cbc4;">datetime </span><span style="font-style:italic;color:#7c4dff;">import </span><span style="color:#80cbc4;">datetime
</span><span style="color:#80cbc4;">now </span><span style="color:#39adb5;">= </span><span style="color:#6182b8;">datetime</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">now</span><span style="color:#39adb5;">()
</span><span style="color:#6182b8;">now</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">strftime</span><span style="color:#39adb5;">(&#39;</span><span style="color:#80cbc4;">%Y</span><span style="color:#91b859;">-</span><span style="color:#80cbc4;">%m</span><span style="color:#91b859;">-</span><span style="color:#80cbc4;">%d</span><span style="color:#91b859;">T</span><span style="color:#80cbc4;">%H</span><span style="color:#91b859;">:</span><span style="color:#80cbc4;">%M</span><span style="color:#91b859;">:</span><span style="color:#80cbc4;">%S</span><span style="color:#91b859;">.</span><span style="color:#80cbc4;">%f</span><span style="color:#39adb5;">&#39;)
</span></code></pre></li>
<li>
<p>转换成带时区的字符串</p>
<pre style="background-color:#fafafa;">
<code class="language-python" data-lang="python"><span style="font-style:italic;color:#7c4dff;">from </span><span style="color:#80cbc4;">datetime </span><span style="font-style:italic;color:#7c4dff;">import </span><span style="color:#80cbc4;">datetime</span><span style="color:#39adb5;">, </span><span style="color:#80cbc4;">timezone
</span><span style="color:#80cbc4;">now </span><span style="color:#39adb5;">= </span><span style="color:#6182b8;">datetime</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">now</span><span style="color:#39adb5;">(</span><span style="color:#6182b8;">timezone</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">utc</span><span style="color:#39adb5;">).</span><span style="color:#6182b8;">astimezone</span><span style="color:#39adb5;">()
</span><span style="color:#6182b8;">now</span><span style="color:#39adb5;">.</span><span style="color:#6182b8;">strftime</span><span style="color:#39adb5;">(&#39;</span><span style="color:#80cbc4;">%Y</span><span style="color:#91b859;">-</span><span style="color:#80cbc4;">%m</span><span style="color:#91b859;">-</span><span style="color:#80cbc4;">%d</span><span style="color:#91b859;">T</span><span style="color:#80cbc4;">%H</span><span style="color:#91b859;">:</span><span style="color:#80cbc4;">%M</span><span style="color:#91b859;">:</span><span style="color:#80cbc4;">%S</span><span style="color:#91b859;">.</span><span style="color:#80cbc4;">%f%z</span><span style="color:#39adb5;">&#39;)
</span></code></pre></li>
</ul>
</li>
</ol>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;tags&#x2F;datetime&#x2F;">#datetime</a>
                    
                        <a href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;tags&#x2F;timezone&#x2F;">#timezone</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;cpp-circular-buffer&#x2F;">boost::circular_buffer 性能对比及用法小结 ›</a>
                    
                    
                    
                </div>
            

        

    </div>

    

    
<div class="utterances"></div>

</article>


                </div>
            </main>

            
            
        </div>

      

          <script type="text/javascript" src="https:&#x2F;&#x2F;lisongmin.github.io&#x2F;even.js" ></script>
      
<script src="https://utteranc.es/client.js"
        repo="lisongmin/lisongmin.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>

    </body>

</html>
